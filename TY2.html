<input type="hidden" class="sheet-tabstoggle" name="attr_sheetTab"  value="display"  />
<div>
    <button type="action" name="act_input" >Input</button>
    <button type="action" name="act_display" >Display</button>
    <button type="action" name="act_abilities" >Special Rules</button>
</div>

<div class="sheet-input">
    <div class="2colrow">
        <div class="col">
            <h3>Team Information</h3>
            <label>Name:</label><input type="text" name="attr_character_name">
            <br>
            <label for="attr_type">Type:</label>
            <select name="attr_type">
                <option value="" selected disabled hidden>Choose here</option>
                <option value="Infantry">Infantry</option>
                <option value="Tank">Tank</option>
                <option value="Aircraft">Aircraft</option>
                <option value="Helicopter">Helicopter</option>
                <option value="Unarmoured Tank">Unarmoured Tank</option>
                <option value="System Unit">System Unit</option>                
            </select>
            <br>
            <label for="attr_nation">Nation:</label>
            <select name="attr_nation">
                <option value="" selected disabled hidden>Choose here</option>
                <option value="US Army">US Army</option>
                <option value="US Marine Corps">US Marines</option>
                <option value="West Germany">West Germany</option>
                <option value="Soviet">Soviet Union</option>
                <option value="British">British</option>
                <option value="Canada">Canada</option>
            </select>
        </div>
        <div class="col">
            <h3>Attributes</h3>
            <label for="attr_courage">Courage:</label>
            <select name="attr_courage">
                <option value="" selected disabled hidden>Choose here</option>
                <option value="4">4+</option>
                <option value="3">3+</option>
                <option value="5">5+</option>
                <option value="2">2+</option>
            </select>
            <br>
            <label for="attr_morale">Morale:</label>
            <select name="attr_morale">
                <option value="" selected disabled hidden>Choose here</option>
                <option value="4">4+</option>
                <option value="3">3+</option>
                <option value="5">5+</option>
                <option value="2">2+</option>
            </select>
            <br>
            <label for="attr_remount">Rally/Remount:</label>
            <select name="attr_remount">
                <option value="" selected disabled hidden>Choose here</option>
                <option value="4">4+</option>
                <option value="3">3+</option>
                <option value="5">5+</option>
                <option value="2">2+</option>
            </select>
            <br>

            <label for="attr_skill">Skill:</label>
            <select name="attr_skill">
                <option value="" selected disabled hidden>Choose here</option>
                <option value="4">4+</option>
                <option value="3">3+</option>
                <option value="5">5+</option>
                <option value="2">2+</option>
                <option value="6">6</option>  
            </select>
            <br>
            <label for="attr_assault">Assault:</label>
            <select name="attr_assault">
                <option value="" selected disabled hidden>Choose here</option>
                <option value="4">4+</option>
                <option value="3">3+</option>
                <option value="5">5+</option>
                <option value="2">2+</option>   
                <option value="6">6</option>    
                <option value="-">-</option>                          
            </select>
            <br>
            <label for="attr_counterattack">Counterattack:</label>
            <select name="attr_counterattack">
                <option value="" selected disabled hidden>Choose here</option>
                <option value="4">4+</option>
                <option value="3">3+</option>
                <option value="5">5+</option>
                <option value="2">2+</option>  
                <option value="6">6</option>  
                <option value="-">-</option>  
            </select>
            <br>
            <label for="attr_hit">Is Hit On:</label>
            <select name="attr_hit">
                <option value="" selected disabled hidden>Choose here</option>
                <option value="4">4+</option>
                <option value="3">3+</option>
                <option value="5">5+</option>
                <option value="2">2+</option>              
            </select>
            <br>
        </div>
    </div>    

    <div class="2colrow">
        <div class="col">
                <h3>Armour</h3>
                <label>Front Armour/Main Save:</label><input type="text" name="attr_armourF">
                <label>Side Armour:</label><input type="text" name="attr_armourS">
                <label>Top Armour:</label><input type="text" name="attr_armourT">
        </div>

        <div class="col">
                <h3>Movement</h3>  
                <label>Tactical:</label><input type="text" name="attr_tactical">
                <label>Terrain Dash:</label><input type="number" name="attr_terrain">
                <label>Cross Country Dash:</label><input type="number" name="attr_country">
                <label>Road Dash:</label><input type="number" name="attr_road">
                <label>Cross On:</label><input type="text" name="attr_cross">
        </div>        
    </div>

    <div class="row">
        <h3>Weapons</h3>

    <div class="weapons">
        <table>
          <thead>
            <tr>
              <th>Weapon</th>
              <th>Range</th>
              <th>ROF Halted</th>
              <th>ROF Moving</th>
              <th>Antitank</th>
              <th>Firepower</th>
              <th>Notes</th>
              <th>Type</th>
            </tr>
          </thead>
          <tbody>
            <tr>
                <td><input type="text" name="attr_weapon1name"></td>
                <td><input type="text" name="attr_weapon1range"></td>
                <td>
                    <select name="attr_weapon1halted">
                        <option value=""selected="selected">(nil)</option>   
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6</option>
                        <option value="7">7</option>
                        <option value="8">8</option>
                        <option value="9">9</option>
                        <option value="10">10</option>
                        <option value="Artillery">Artillery</option>
                        <option value="Salvo">Salvo</option>
                    </select>
                </td>
                <td>
                    <select name="attr_weapon1moving">
                        <option value=""selected="selected">(nil)</option>   
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6</option>
                        <option value="7">7</option>
                        <option value="8">8</option>
                        <option value="9">9</option>
                        <option value="10">10</option>
                        <option value="Artillery">Artillery</option>
                        <option value="Salvo">Salvo</option>
                    </select>
                </td>
                <td><input type="number" name="attr_weapon1at"></td>
                <td><input type="text" name="attr_weapon1fp"></td>
                <td><input type="text" name="attr_weapon1notes"></td>
                <td>
                    <select name="attr_weapon1type">
                        <option selected="selected" value="Small Arms">Small Arms</option>
                        <option value="Vehicle MG">Vehicle MG</option>
                        <option value="AA MG">AA MG</option>
                        <option value="Flamethrower">Flamethrower</option>              
                        <option value="Gun">Main Gun</option>
                        <option value="Artillery">Artillery</option>
                        <option value="Rockets">Rockets</option>
                        <option value="Autocannon">Autocannon</option>
                        <option value="Handheld AT">Handheld AT</option>    
                        <option value="Vehicle Missile">Vehicle Missile</option>                    
                    </select>
                </td>
            </tr>
             <tr>
                <td><input type="text" name="attr_weapon2name"></td>
                <td><input type="text" name="attr_weapon2range"></td>
                <td>
                    <select name="attr_weapon2halted">
                        <option value=""selected="selected">(nil)</option>   
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6</option>
                        <option value="7">7</option>
                        <option value="8">8</option>
                        <option value="9">9</option>
                        <option value="10">10</option>
                        <option value="Artillery">Artillery</option>
                        <option value="Salvo">Salvo</option>
                    </select>
                </td>
                <td>
                    <select name="attr_weapon2moving">
                        <option value=""selected="selected">(nil)</option>   
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6</option>
                        <option value="7">7</option>
                        <option value="8">8</option>
                        <option value="9">9</option>
                        <option value="10">10</option>
                        <option value="Artillery">Artillery</option>
                        <option value="Salvo">Salvo</option>
                    </select>
                </td>
                <td><input type="number" name="attr_weapon2at"></td>
                <td><input type="text" name="attr_weapon2fp"></td>
                <td><input type="text" name="attr_weapon2notes"></td>
                <td>
                    <select name="attr_weapon2type">
                        <option selected="selected" value="Small Arms">Small Arms</option>
                        <option value="Vehicle MG">Vehicle MG</option>
                        <option value="AA MG">AA MG</option>
                        <option value="Flamethrower">Flamethrower</option>              
                        <option value="Gun">Main Gun</option>
                        <option value="Artillery">Artillery</option>
                        <option value="Rockets">Rockets</option>
                        <option value="Autocannon">Autocannon</option>
                        <option value="Handheld AT">Handheld AT</option>    
                        <option value="Vehicle Missile">Vehicle Missile</option>                    
                    </select>
                <td>
            </tr>
            <tr>
                <td><input type="text" name="attr_weapon3name"></td>
                <td><input type="text" name="attr_weapon3range"></td>
                <td>
                    <select name="attr_weapon3halted">
                        <option value=""selected="selected">(nil)</option>   
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6</option>
                        <option value="7">7</option>
                        <option value="8">8</option>
                        <option value="9">9</option>
                        <option value="10">10</option>
                        <option value="Artillery">Artillery</option>
                        <option value="Salvo">Salvo</option>
                    </select>
                </td>
                <td>
                    <select name="attr_weapon3moving">
                        <option value=""selected="selected">(nil)</option>   
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6</option>
                        <option value="7">7</option>
                        <option value="8">8</option>
                        <option value="9">9</option>
                        <option value="10">10</option>
                        <option value="Artillery">Artillery</option>
                        <option value="Salvo">Salvo</option>
                    </select>
                </td>
                <td><input type="number" name="attr_weapon3at"></td>
                <td><input type="text" name="attr_weapon3fp"></td>
                <td><input type="text" name="attr_weapon3notes"></td>
                <td>
                    <select name="attr_weapon3type">
                        <option selected="selected" value="Small Arms">Small Arms</option>
                        <option value="Vehicle MG">Vehicle MG</option>
                        <option value="AA MG">AA MG</option>
                        <option value="Flamethrower">Flamethrower</option>              
                        <option value="Gun">Main Gun</option>
                        <option value="Artillery">Artillery</option>
                        <option value="Rockets">Rockets</option>
                        <option value="Autocannon">Autocannon</option>
                        <option value="Handheld AT">Handheld AT</option>    
                        <option value="Vehicle Missile">Vehicle Missile</option>                               
                    </select>
                <td>
            </tr>
            <tr>
                <td><input type="text" name="attr_weapon4name"></td>
                <td><input type="text" name="attr_weapon4range"></td>
                <td>
                    <select name="attr_weapon4halted">
                        <option value=""selected="selected">(nil)</option>   
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6</option>
                        <option value="7">7</option>
                        <option value="8">8</option>
                        <option value="9">9</option>
                        <option value="10">10</option>
                        <option value="Artillery">Artillery</option>
                        <option value="Salvo">Salvo</option>
                    </select>
                </td>
                <td>
                    <select name="attr_weapon4moving">
                        <option value=""selected="selected">(nil)</option>   
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6</option>
                        <option value="7">7</option>
                        <option value="8">8</option>
                        <option value="9">9</option>
                        <option value="10">10</option>
                        <option value="Artillery">Artillery</option>
                        <option value="Salvo">Salvo</option>
                    </select>
                </td>
                <td><input type="number" name="attr_weapon4at"></td>
                <td><input type="text" name="attr_weapon4fp"></td>
                <td><input type="text" name="attr_weapon4notes"></td>
                <td>
                    <select name="attr_weapon4type">
                        <option selected="selected" value="Small Arms">Small Arms</option>
                        <option value="Vehicle MG">Vehicle MG</option>
                        <option value="AA MG">AA MG</option>
                        <option value="Flamethrower">Flamethrower</option>              
                        <option value="Gun">Main Gun</option>
                        <option value="Artillery">Artillery</option>
                        <option value="Rockets">Rockets</option>
                        <option value="Autocannon">Autocannon</option>
                        <option value="Handheld AT">Handheld AT</option>    
                        <option value="Vehicle Missile">Vehicle Missile</option>                                       
                    </select>
                <td>
            </tr>
          </tbody>
        </table>    
     </div>    

    </div>    


    <div class="row">
            <h3>Special</h3>
            <input type="text" name="attr_special">
            <br>
            <h3>Mistaken Target</h3>
            <input type="checkbox" id="unique" name="attr_unique" value="true">
            <label for="unique">Unique Marker</label>
    </div>
</div>



<div class="sheet-display">
    <input type="hidden" name="attr_nation"/>

    <div class="mysheet">
      <div class="attributes">

        <main>
        <input type="hidden" name="attr_nation"/>
          <section class="header f-center">
            <h1><span name="attr_character_name"></span></h1>
            <h3><span>&#8226; </span><span name="attr_type"></span><span> Unit &#8226;</span></h3>
            <h3><span name="attr_specialText"></span></h3>
          </section>

          <section class="common f-center">
              <img alt="Character Avatar" name="attr_character_avatar"/>
          </section>

          <section class="motive f-col">
            <div class="info">
              <h2>Courage: <span name="attr_courage"></span>+</h2>
              <h3>Morale: <span name="attr_morale"></span>+</h3>
              <h3><span name="attr_rallyname"></span><span name="attr_remount"></span><span name="attr_rplus"></span></h3>      
            </div>  
          </section>

          <section class="armour f-col">
            <h2>Is Hit On: <span name="attr_hit"></span>+</h2>
            <input type="hidden" name="attr_type" class="toggle">
            <div class="armvehicle">
                <h4>Front</h4>
                <h4>Side</h4>
                <h4>Top</h4>
                <h3><span name="attr_armourF"></span></h3>
                <h3><span name="attr_armourS"></span></h3>
                <h3><span name="attr_armourT"></span></h3>
            </div>    
            <div class="infantry">
                <span></span>
                <h2>Infantry Save: <span name="attr_armourF"></span>+</h2>
            </div>   
            <div class="aircraft">
                <span></span>
                <h2>Aircraft Save: <span name="attr_armourF"></span>+</h2>
            </div>   
            <div class="unarmoured">
                <span></span>
                <h2>Tank Save: <span name="attr_armourF"></span>+</h2>
            </div>   
            <div class="helicopter">                
                <span></span>
                <h2>Helicopter Save: <span name="attr_armourF"></span>+</h2>
            </div>   
          </section>

          <section class="move">
            <h3>Movement</h3>
            <input type="hidden" name="attr_movementtype" value = "Other" class="togglemove">
            <div class="movement">
              <span>Tactical</span>
              <span>Terrain Dash</span>
              <span>Cross Country Dash</span>
              <span>Road Dash</span>
              <span>Cross</span>
              <h4><span name="attr_tactical"></span><span>"</span></h4>
              <h4><span name="attr_terrain"></span><span>"</span></h4>
              <h4><span name="attr_country"></span><span>"</span></h4>
              <h4><span name="attr_road"></span><span>"</span></h4>                 
              <h4><span name="attr_cross"></span></h4>
            </div>
            <div class="airmove">
                <span>Movement</span>
                <span>Cross</span>
                <h4>Unlimited</h4>
                <h4>Auto</h4>
            </div>
          </section>

          <section class="skill">
            <div class="info">
              <h2>Skill: <span name="attr_skill"></span>+</h2>
              <h3><span name="attr_assaultname"></span><span name="attr_assault"></span><span name="attr_aplus"></span></h3>
              <h3><span name="attr_counterattackname"></span><span name="attr_counterattack"></span><span name="attr_cplus"></span></h3>
            </div>  
          </section>

          <section class="flag">
            <img name="attr_nationimageA">
          </section>
          
          <section class="flag2">
            <img name="attr_nationimageB">
          </section>

          <section class="weapon">
            <h3>Weapons</h3>
            <div class="weaponinfo">
                <div class="box1"><span>Weapon</span></div>
                <div class="box2"><span>Range</span></div>
                <div class="box3"><span>ROF</span></div>
                <div class="box4"><span>Antitank</span></div>
                <div class="box5"><span>Firepower</span></div>
                <div class="box6"><span>Notes</span></div>
                <div class="box"><span>Halted</span></div>
                <div class="box"><span>Moving</span></div>
                <h4><span name="attr_weapon1name"></span></h4>
                <h4><span name="attr_weapon1range"></span></h4>
                <h4><span name="attr_weapon1halted"></span></h4>
                <h4><span name="attr_weapon1moving"></span></h4>
                <h4><span name="attr_weapon1at"></span></h4>
                <h4><span name="attr_weapon1fp"></span></h4>
                <h4><span name="attr_weapon1notes"></span></h4>
                <h4><span name="attr_weapon2name"></span></h4>
                <h4><span name="attr_weapon2range"></span></h4>
                <h4><span name="attr_weapon2halted"></span></h4>
                <h4><span name="attr_weapon2moving"></span></h4>
                <h4><span name="attr_weapon2at"></span></h4>
                <h4><span name="attr_weapon2fp"></span></h4>
                <h4><span name="attr_weapon2notes"></span></h4>
                <h4><span name="attr_weapon3name"></span></h4>
                <h4><span name="attr_weapon3range"></span></h4>
                <h4><span name="attr_weapon3halted"></span></h4>
                <h4><span name="attr_weapon3moving"></span></h4>
                <h4><span name="attr_weapon3at"></span></h4>
                <h4><span name="attr_weapon3fp"></span></h4>
                <h4><span name="attr_weapon3notes"></span></h4>
                <h4><span name="attr_weapon4name"></span></h4>
                <h4><span name="attr_weapon4range"></span></h4>
                <h4><span name="attr_weapon4halted"></span></h4>
                <h4><span name="attr_weapon4moving"></span></h4>
                <h4><span name="attr_weapon4at"></span></h4>
                <h4><span name="attr_weapon4fp"></span></h4>
                <h4><span name="attr_weapon4notes"></span></h4>    
            </div>         
          </section>
        </main>
      </div>
    </div>    
</div>

<div class="sheet-abilities">
    <input type="hidden" name="attr_nation"/>
    <div class="mysheet">
        <div class="attributes">
            <input type="hidden" name="attr_nation"/>
            <div class="spheader">
                <h2>Special Rules</h2>
                <br>
            </div>
            <input type="hidden" name="attr_nation"/>
            <div class="spbody">
                <div class = "item">
                    <span style="font-weight:bold;" name="attr_spec1Name"></span>
                    <span name="attr_spec1Text"></span>
                </div>
                <div class = "item">
                    <span style="font-weight:bold;" name="attr_spec2Name"></span>
                    <span name="attr_spec2Text"></span>
                </div>
                <div class = "item">
                    <span style="font-weight:bold;" name="attr_spec3Name"></span>
                    <span name="attr_spec3Text"></span>
                </div>
                <div class = "item">                
                    <span style="font-weight:bold;" name="attr_spec4Name"></span>
                    <span name="attr_spec4Text"></span>
                </div>
                <div class = "item">                                
                    <span style="font-weight:bold;" name="attr_spec5Name"></span>
                    <span name="attr_spec5Text"></span>
                </div>
                <div class = "item">                
                    <span style="font-weight:bold;" name="attr_spec6Name"></span>
                    <span name="attr_spec6Text"></span>
                </div>
                <div class = "item">                
                    <span style="font-weight:bold;" name="attr_spec7Name"></span>
                    <span name="attr_spec7Text"></span>
                </div>
                <div class = "item">                
                    <span style="font-weight:bold;" name="attr_spec8Name"></span>
                    <span name="attr_spec8Text"></span>
                </div>
                <div class = "item">                
                    <span style="font-weight:bold;" name="attr_spec9Name"></span>
                    <span name="attr_spec9Text"></span>
                </div>
                <div class = "item">                
                    <span style="font-weight:bold;" name="attr_spec10Name"></span>
                    <span name="attr_spec10Text"></span>
                </div>
            </div>
        </div>
    </div>
</div>



<script type="text/worker">
    const buttonlist = ["input","display","abilities"];
    buttonlist.forEach(button => {
        on(`clicked:${button}`, function() {
            setAttrs({
                sheetTab: button
            });
        });
    });

    on("sheet:opened", function() {
        setAttrs({sheetTab:"display"});
    });

    on("change:attrs sheet:opened", function() { 
        getAttrs(["type","nation","special","unique","tactical","terrain","country","road","cross","counterattack","assault","weapon1notes","weapon2notes","weapon3notes","weapon4notes"], function(values) {
            let nationImage;
            let nation = values.nation;
            let special = values.special;
            if (!special) {special = " "};
            let unique = values.unique;
            if (!unique) {unique = false};

            let type = values.type;
            let ralName = "Remount: ";
            let aplus = "+";
            let rplus = "+";
            let cplus = "+";

            let assault = "Assault: ";
            let counterattack = "Counterattack: "
            if (type === "Infantry") {
                ralName = "Rally: ";
            }
            if (type === "Aircraft" || type === "Helicopter") {
                ralName = "";
                aplus = "";
                rplus = "";
                cplus = "";
                assault = "";
                counterattack = "";
            }
            let assaultV = values.assault;
            let counterV = values.counterattack;
            if (assaultV === "-") {
                aplus = "";
            }
            if (counterV === "-") {
                cplus = "";
            }

            if (nation === "Soviet") {
                nationImageA = "https://s3.amazonaws.com/files.d20.io/images/324272729/H0Ea79FLkZIn-3riEhuOrA/thumb.png?1674441877";
                if (special.includes("HQ")) {
                    nationImageB = "https://s3.amazonaws.com/files.d20.io/images/327591678/LqKZj1raocQeICX6Up1I-w/thumb.png?1676164117";
                } else {
                    nationImageB = "https://s3.amazonaws.com/files.d20.io/images/324272729/H0Ea79FLkZIn-3riEhuOrA/thumb.png?1674441877";
                }
            }
            if (nation === "British") {
                nationImageA = "https://s3.amazonaws.com/files.d20.io/images/330518437/XRA7n-jqZHqHD92K4cA3wQ/thumb.png?1677718209";
                if (special.includes("HQ")) {
                    nationImageB = "https://s3.amazonaws.com/files.d20.io/images/327591678/LqKZj1raocQeICX6Up1I-w/thumb.png?1676164117";
                } else {
                    nationImageB = "https://s3.amazonaws.com/files.d20.io/images/330518437/XRA7n-jqZHqHD92K4cA3wQ/thumb.png?1677718209";
                }            }
            if (nation === "US Army") {
                nationImageA = "https://s3.amazonaws.com/files.d20.io/images/327591694/wOEPfGDaGsOwSNTlLvC5VA/thumb.png?1676164120";
                if (special.includes("HQ")) {
                    nationImageB = "https://s3.amazonaws.com/files.d20.io/images/327591678/LqKZj1raocQeICX6Up1I-w/thumb.png?1676164117";
                } else {
                    nationImageB = "https://s3.amazonaws.com/files.d20.io/images/327591694/wOEPfGDaGsOwSNTlLvC5VA/thumb.png?1676164120";
                }           
            }
            if (nation === "US Marine Corps") {
                nationImageA = "https://s3.amazonaws.com/files.d20.io/images/327770708/SxnQ76mw9gYbJZg1SJVAxw/thumb.png?1676241515";
                if (special.includes("HQ")) {
                    nationImageB = "https://s3.amazonaws.com/files.d20.io/images/327591678/LqKZj1raocQeICX6Up1I-w/thumb.png?1676164117";
                } else {
                    nationImageB = "https://s3.amazonaws.com/files.d20.io/images/327770708/SxnQ76mw9gYbJZg1SJVAxw/thumb.png?1676241515";
                }           
            }
            if (nation === "West Germany") {
                nationImageA = "https://s3.amazonaws.com/files.d20.io/images/329415788/ypEgv2eFi-BKX3YK6q_uOQ/thumb.png?1677173028";
                if (special.includes("HQ")) {
                    nationImageB = "https://s3.amazonaws.com/files.d20.io/images/327591678/LqKZj1raocQeICX6Up1I-w/thumb.png?1676164117";
                } else {
                    nationImageB = "https://s3.amazonaws.com/files.d20.io/images/329415788/ypEgv2eFi-BKX3YK6q_uOQ/thumb.png?1677173028";
                }           
            }
            if (nation === "Canada") {
                nationImageA = "https://s3.amazonaws.com/files.d20.io/images/341267099/ytmrZaWp33yLZa64tcEkIw/thumb.png?1683769035";
                if (special.includes("HQ")) {
                    nationImageB = "https://s3.amazonaws.com/files.d20.io/images/344127718/JY9iVFm3FkS15u5RvqjgiA/thumb.png?1685492130";
                } else {
                    nationImageB = "https://s3.amazonaws.com/files.d20.io/images/341267099/ytmrZaWp33yLZa64tcEkIw/thumb.png?1683769035";
                }           
            }


            let specialText = " ";
            let specialArray = [];
            let specialInfo = {
                "Air Assault": "An Air Assault Unit may only be held in Reserve if all the Units deployed on table are Air Assault Units",
                "Accurate": 'No penalty to Hit for range > 16" if Shooter did not Move',
                "Advanced Stabiliser": 'Tactical Speed is 14". Machineguns cannot Shoot and the Team cannot Assault if it moves more than 10"',
                "Amphibious": "Treat Impassable Water as Difficult Terrain",
                "Anti-helicopter": "Can shoot at Helicopters with a ROF of 1",
                "Anti-Helicopter": "Can shoot at Helicopters with a ROF of 1",
                "Applique Armour": 'Front and Side Armour is 13 against HEAT weapons',
                "Bazooka Skirts": "Front and Side Armour is minimum 10 against HEAT Weapons",
                "BDD Armour": "Front and Side Armour is minimum 13 against HEAT Weapons",
                "Bomblets": "Bomblets scatter over a wider area, using a SALVO template",
                "Brutal": 'Infantry and Unarmoured Tank Teams re-roll successful Saves',
                "Chobham Armour": "Front and Side Armour is minimum 16 vs HEAT weapons",
                "Dedicated AA": "Uses normal ROF when firing at Aircraft/Helicopters",
                "Dragon Mount": "The vehicle may fire the weapon if a Passenger with the weapon is mounted",
                "ERA": "Front and Side Armour is minimum 16 against HEAT Weapons",
                "Firebase": "Artilery Unit can remain Offboard and fire Artillery Bombardments",
                "Forward Firing": "Can only target Teams in front of the Shooter",
                "Guided": 'No penalty to Hit for range > 16". Cannot hit Infantry unless they are stationary in Bulletproof Cover',
                "Guided AA": 'Guided Weapons that cannot target Tank or Infantry Teams. No penalty to Hit for range > 16"',
                "Hammerhead": "Team with a Hammerhead can remain Gone to Ground while shooting its missile",
                "HEAT": 'Target Armour is not increased for range over 16". Affected by BDD, Skirts, Chobham and ERA Armour',
                "Heavy Weapon": "Team cannot Charge into Contact",
                "Hunter-Killer": "Hunter-Killer Helicopters can use terrain for Concealment and are Gone to Ground unless they Shoot",
                "Independent": "Independent Teams can use the Mistaken Target rule to reassign hits to nearby Units, but cannot Charge into Contact or take an Objective",
                "Infra Red": "Rolls 2 Dice for Night Visibility and takes the highest score",
                "Infra-Red": "Rolls 2 Dice for Night Visibility and takes the highest score",
                "Jump Jet": "Enters the table on a score of 3+",
                "Laser Rangefinder": 'No penalty to Hit for range > 16"',
                "Laser Guided Projectiles": "Must be guided by an Observer, using it for LOS",
                "Mine Clearing Device": "Team can attempt to clear Minefields",
                "Minelets": "Once per game, the Unit can fire Minelets, placing 1 per 3 teams",
                "MLRS": "Multiple Launching Rocket System - each Team counts as two Teams firing",
                "Mounted": "Can fire a Mounted Weapon if a Passenger has that weapon",
                "Observer": "An Observer Team can Spot for any friendly Artillery Unit and reduces the score required to Range In by -1",
                "One Shot": "Can only be used once per game",
                "Overhead Fire": "Can fire over Short Terrain and Friendly Teams without penalty",
                "Passengers 1": "Team can carry 1 Infantry Team as Passengers",
                "Passengers 2": "Team can carry 2 Infantry Teams as Passengers",
                "Passengers 3": "Team can carry 3 Infantry Teams as Passengers",
                "Passengers 4": "Team can carry 4 Infantry Teams as Passengers",
                "Pinned ROF 1": "ROF 1 when Unit is Pinned Down",
                "Radar": 'When shooting at Aircraft/Helicopters, range is increased by 12" and there are no penalties for range >16"',
                "Scout": "Scouts are Gone to Ground unless they Shoot or Assault",
                "Slow Firing": "+1 to Hit if Moving",
                "Smoke": "Can shoot Smoke ammunition",
                "Smoke Bombardment": "Once per game can fire a Smoke Bombardment", 
                "Sneak and Peek": 'A Team with Sneak and Peek can move 10" if it is not firing its Main Gun',
                "Spearhead": "Initial Deployment Move and Rules",   
                "Stabiliser": 'Tank can move 14" at Tactical, gaining a +1 penalty To Hit. Machineguns cannot Shoot and the Team cannot Assault if it moves more than 10"',
                "Swingfire": "Team firing Swingfire Missiles can remain Gone to Ground",
                "Tandem Warhead": "Tandem Warhead HEAT weapons are unaffected by ERA Armour",
                "Thermal Imaging": "Rolls 2 Dice for Night Visibility and takes the highest score. No To Hit penalties for Night and Smoke",
            }

            if (special !== " ") {
                specialText = " • ";
                special = special.split(",");
                for (let i=0;i<special.length;i++) {
                    specialText += special[i].trim() + " • "
                }                
            }

            let weapon1notes = values.weapon1notes.split(",");            
            let weapon2notes = values.weapon2notes.split(","); 
            let weapon3notes = values.weapon3notes.split(","); 
            let weapon4notes = values.weapon4notes.split(","); 
            let specials = weapon1notes.concat(weapon2notes,weapon3notes,weapon4notes,special);
            specials = [... new Set(specials)];
            for (let i=0;i<specials.length;i++) {
                specials[i] = specials[i].trim();
            }
            specials.sort(function (a,b) {
                let a1 = a.charAt(0).toLowerCase();
                let b1 = b.charAt(0).toLowerCase();
                if (a1<b1) {return -1};
                if (a1>b1) {return 1};
                return 0;
            });

            for (let i=0;i<specials.length;i++) {
                let spec = specials[i];
                let specName = spec + ": ";
                let specText = specialInfo[spec];
                if (specText) {
                    specialArray.push([specName,specText]);
                }
            }

            for (let i=(specialArray.length - 1);i<10;i++) {
                specialArray.push(["",""]);
            }

            let tact = values.tactical;
            let ter = values.terrain;
            let count = values.country;
            let road = values.road;
            let cross = values.cross;

            let move = "Other";
            if (type === "Aircraft" || type === "Helicopter") {
                move = "Aircraft";
            } 
            if (type === "Infantry") {
                tact = '8';
                ter = '8';
                count = '12';
                road = '12';
                cross = "AUTO";
            }

            setAttrs({
                "nationimageA": nationImageA,
                "nationimageB": nationImageB,
                "rallyname": ralName,
                "aplus": aplus,
                "cplus": cplus,
                "rplus": rplus,
                "movementtype": move,
                "unique": unique,
                "tactical": tact,
                "terrain": ter,
                "country": count,
                "road": road,
                "cross": cross,
                "assaultname": assault,
                "counterattackname": counterattack,
                "specialText": specialText,
                "spec1Name": specialArray[0][0],
                "spec1Text": specialArray[0][1],
                "spec2Name": specialArray[1][0],
                "spec2Text": specialArray[1][1],
                "spec3Name": specialArray[2][0],
                "spec3Text": specialArray[2][1],
                "spec4Name": specialArray[3][0],
                "spec4Text": specialArray[3][1],
                "spec5Name": specialArray[4][0],
                "spec5Text": specialArray[4][1],
                "spec6Name": specialArray[5][0],
                "spec6Text": specialArray[5][1],
                "spec7Name": specialArray[6][0],
                "spec7Text": specialArray[6][1],
                "spec8Name": specialArray[7][0],
                "spec8Text": specialArray[7][1],
                "spec9Name": specialArray[8][0],
                "spec9Text": specialArray[8][1],
                "spec10Name": specialArray[9][0],
                "spec10Text": specialArray[9][1],





            })
        });    
    });  




</script>